---
layout: post
title:  "Euler 2: Even Fibonacci numbers"
date:   2020-04-10 17:00:00 +0530
mathjax: true
comments: true
---

[Problem](#problem) | [Fibonacci Numbers](#fibonacci-numbers) | [Approach](#approach) | [java](#java-implementation) | [go](#golang-implementation) | [links](#links)

## Problem

Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with $1$ and $2$, the first $10$ terms will be:

<div class="math">
\begin{equation*}
    1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
\end{equation*}
</div>

By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.

## Fibonacci Numbers

Fibonacci numbers are a sequence of number $F_n$ defined by the linear recurrence relation:
<div class="math">
\begin{equation*}
    F_n = F_{n-1} + F_{n-2}
\end{equation*}
</div>

The first $2$ terms of the sequence are $F_1=F_2=1$. And the series is: 
<div class="math">
\begin{equation*}
    1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
\end{equation*}
</div>

## Approach

Observe that the problem defines the first $2$ terms of the series as $F_1 = 1$ and $F_2 = 2$.

The approach to this problem can be as follows:
1. Iterate over the sequence of fibonacci numbers.
2. If the number is even and less than the given limit then add it to the sum.

We will try to solve the Hackerrank problem since it provides a larger constraint ($4 \times 10^{16}$).

Some observations:
1. The $80^{th}$ Fibonacci number is $37889062373143906$. The next number exceeds the constraints.
2. The fibonacci sequence given follows the following parity:
<div class="math">
\begin{equation*}
    o, e, o, o, e, o, o, e, o, o, ...
\end{equation*}
</div>
Where e stands for even and o for odd.

Using above observations we only need to iterate in steps of $3$ starting with $2^{nd}$ number (See code).

## Java Implementation

```java
import java.util.*;

/*
*   To run HackerRank PE+ solution run:
*   javac Euler002.java && java Euler001
*
*   To run projecteuler.net solution run:
*   javac Euler002.java && java Euler001 1
*/

class Euler002 {

    // Array to store fibonacci numbers
    static long f[];

    public static void main(String[] args) {
        if (args.length==0) {
            solveHR();
        }
        else {
            solvePE();
        }
    }

    public static void solveHR() {
        precompute();
        Scanner s=new Scanner(System.in);
        int t=s.nextInt();
        long n,sum;
        while(t-->0)
            {
            n=s.nextLong();
            sum = solve(n);
            System.out.println(sum);
        }
        s.close();
    }

    public static void solvePE() {
        precompute();
        System.out.println(solve((long)4e6));
    }

    public static void precompute() {
        // Calculate and store fibonacci numbers
        f = new long[85];
        f[1] = 1;
        f[2] = 2;
        int i;
        for(i=3;i<f.length;i++) {
            f[i]=f[i-1]+f[i-2];
        }
    }

    public static long solve(long n) {
        int i;
        long sum = 0;
        for(i=2;;i+=3) {
            if(f[i]<=n) sum+=f[i];
            else break;
        }
        return sum;   
    }
}
```

## Golang Implementation

```go
package main

import (
	"fmt"
	"os"
)

/*
To execute hackerrank projecteuler+ solution use:
	go build main.go
	./main

To execute projecteuler.net solution use:
	go build main.go
	./main 1
*/

func main() {
	switch len(os.Args) {
	case 1:
		solve()
	default:
		solvePE()
	}
}

func solve() {
	// Hackerrank PE+ solution
	var t, n int
	fmt.Scanf("%d", &t)
	for ; t > 0; t-- {
		fmt.Scanf("%d", &n)
		fmt.Println(getFiboSum(n))
	}
}
func getFiboSum(n int) int {
	a := 1
	b := 2
	sum := b
	c := 0
	for {
		c = a + b
		if c > n {
			break
		}
		if c%2 == 0 {
			sum = sum + c
		}
		a, b = b, c
	}
	return sum
}
func solvePE() {
	// projecteuler.net solution
	fmt.Println(getFiboSum(4000000))
}
```

## Links
1. [projecteuler.net](https://projecteuler.net/problem=2)
2. [Hackerrank PE+](https://www.hackerrank.com/contests/projecteuler/challenges/euler002/problem)
3. [Fibonacci Numbers](https://mathworld.wolfram.com/FibonacciNumber.html)